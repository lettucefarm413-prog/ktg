<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>싱싱농산물 B2B | 상품목록</title>
  <link rel="stylesheet" href="assets/style.css" />
  
</head>
<body>
  <div class="topbar" style="background:#fff;">
    <div class="container" style="padding:12px 18px;">
      <div style="font-size:22px; font-weight:1000; color:#dc2626; letter-spacing:-.6px;">
        ⏱️ 오전 9시까지 발주+정산시 당일 출고
      </div>
      <div style="margin-top:6px; font-size:14px; color:#475569;">
        🚚 CJ대한통운 · 📦 전 품목 1/2/3/5kg 소포장 · 최소 1개부터 · 전국 택배
      </div>
    </div>
  </div>

  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="logo.jpg" alt="싱싱농산물 로고">
        <div>
          <div style="font-weight:900;">싱싱농산물</div>
          <div style="font-size:12px;color:#64748b;">B2B 발주몰</div>
        </div>
      </a>

      <nav class="menu">
        <a href="products.html">상품목록</a>
        <a href="checkout.html">발주서</a>
        <a href="contact.html">단가/상담</a>
      </nav>

      <div class="cta">
        <a class="btn" href="cart.html">장바구니 (<span data-cart-count>0</span>)</a>
        <a class="btn primary" href="checkout.html">바로 발주</a>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      
<h1 class="h1">상품목록</h1>
<p class="p">품목/포장단위 선택 후 바로 장바구니 담기 가능합니다.</p>

<div class="card" style="margin-top:14px;">
  <div class="form-grid" style="grid-template-columns:1.4fr 1fr 1fr .7fr;">
    <select class="input" id="item">
<option value="">원하는 품목(전체)</option>
<option value="carrot_soil">🥕 국내산 흙당근(상)</option>
<option value="carrot_mid">🥕 제주당근(중)</option>
<option value="carrot_top">제주당근(상)</option>
<option value="potato_special">제주감자(특)</option>
<option value="kohlrabi">콜라비</option>
<option value="onion_mid">양파(가정용 중)</option>
<option value="cabbage_38">양배추(38)</option>
<option value="sweetpotato_mid">꿀고구마(중)</option>
</select>

    <select class="input" id="pack">
      <option value="">포장단위(전체)</option>
      <option value="1">1kg</option>
      <option value="2">2kg</option>
      <option value="3">3kg</option>
      <option value="5">5kg</option>
      <option value="4">4kg (양배추)</option>
    </select>

    <input class="input" id="qtyGlobal" type="number" inputmode="numeric" pattern="[0-9]*"
           min="1" step="1" value="1" placeholder="수량 (예: 1000)">
    <button class="btn primary" id="quickAdd" type="button" style="white-space:nowrap;">+ 담기</button>
  </div>
  <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
    <button class="btn" id="reset">초기화</button>
    <a class="btn" href="https://docs.google.com/spreadsheets/d/19AARkBVjToNDbb_IbyEG3OGRsa32ZpAwLLjbLpM2h7s/edit?usp=sharing" target="_blank" rel="noopener">📄 싱싱농산물 공급표 및 공지사항(구글시트)</a>
    <span class="badge" id="shipInfo"></span>
  </div>
</div>

<div class="grid products" id="grid"></div>

</div>
  </main>

  <footer>
    <div class="container">
      <div style="font-weight:900; margin-bottom:6px;">싱싱농산물</div>
      <div class="small">
        B2B 산지직송 · 농부 검수형 공급 · 전 품목 1/2/3/5kg 소포장 · CJ대한통운 전국 택배<br>
        © 싱싱농산물. All rights reserved.
      </div>
      <div class="small" style="margin-top:10px;">
        문의: 010-5595-3890 / lettucefarm413@gmail.com
      </div>
    </div>
  </footer>

  <div class="floating">
    <a class="float-btn" href="contact.html">💬 단가/상담</a>
    <a class="float-btn secondary" href="tel:01055953890">📞 전화 문의</a>
  </div>

  
  
    <script src="assets/prices.js"></script>
<script src="assets/app.js"></script>
<script>
  // ===== 데이터 (오프라인/파일열기에서도 동작) =====
  const PRODUCTS = [{"id": "carrot_soil", "name": "국내산 흙당근(상)", "emoji": "🥕", "img": "https://thumbnail6.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/442466391635115-149e0b46-5169-41be-8baf-0ca8a59b1551.png"}, {"id": "carrot_mid", "name": "제주당근(중)", "emoji": "🥕", "img": "https://thumbnail6.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/442466391635115-149e0b46-5169-41be-8baf-0ca8a59b1551.png"}, {"id": "carrot_top", "name": "제주당근(상)", "emoji": "🥕", "img": "https://thumbnail6.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/442466391635115-149e0b46-5169-41be-8baf-0ca8a59b1551.png"}, {"id": "potato_special", "name": "제주감자(특)", "emoji": "🥔", "img": "https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/1728271386015686-107eee19-a33f-4011-93dd-44fabc3fa09f.jpg"}, {"id": "kohlrabi", "name": "콜라비", "emoji": "🥦", "img": "https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/6291213654393-1cb2d94e-ad14-440c-a5c3-ce9bb16e6680.jpg"}, {"id": "onion_mid", "name": "양파(가정용 중)", "emoji": "🧅", "img": "https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/2181774229270366-bdc80c70-69ea-439e-9002-236b438ad24a.jpg"}, {"id": "cabbage_38", "name": "양배추(38)", "emoji": "🥬", "img": "https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/retail/images/2596932496894413-40b1dba0-49f1-4f9d-8ef6-b97ceb909004.jpg"}, {"id": "sweetpotato_mid", "name": "꿀고구마(중)", "emoji": "🍠", "img": "https://thumbnail.coupangcdn.com/thumbnails/remote/492x492ex/image/vendor_inventory/8f25/5bcce6d7b83c641607964f9ff26239f99e1651ddbfd10a19809c6f3ee9ae.jpeg"}];
  const PRICE = (window.SINGSING_PRICE_TABLE && window.SINGSING_PRICE_TABLE.items) ? window.SINGSING_PRICE_TABLE.items : {};
  const priceOf = (id, pack) => (PRICE[id] && PRICE[id][pack]) ? PRICE[id][pack] : 0;

  // ===== 장바구니/토스트/카운트/시간 함수는 assets/app.js 를 사용합니다. =====

// ===== UI 참조 =====
  const itemSel = document.getElementById('item');
  const packSel = document.getElementById('pack');
  const qtyEl   = document.getElementById('qtyGlobal');
  const grid    = document.getElementById('grid');
  const shipInfo= document.getElementById('shipInfo');

  const packOptionsHTML = (itemId) => {
    // 양배추(38) : 2kg/4kg만
    if(itemId === 'cabbage_38') {
      return `<option value="">포장단위 선택</option>
              <option value="2">2kg</option>
              <option value="4">4kg</option>`;
    }
    // 기본 : 1/2/3/5kg
    return `<option value="">포장단위 선택</option>
            <option value="1">1kg</option>
            <option value="2">2kg</option>
            <option value="3">3kg</option>
            <option value="5">5kg</option>`;
  };

  const setPackOptions = () => {
    const itemId = (itemSel.value || '').trim();
    const prev = packSel.value || '';
    if(!itemId) {
      packSel.innerHTML = `<option value="">포장단위(전체)</option>
                           <option value="1">1kg</option>
                           <option value="2">2kg</option>
                           <option value="3">3kg</option>
                           <option value="5">5kg</option>
                           <option value="4">4kg (양배추)</option>`;
    } else {
      packSel.innerHTML = packOptionsHTML(itemId);
    }
    if([...packSel.options].some(o => o.value === prev)) packSel.value = prev;
  };

  const defaultPackFor = (id) => id === 'cabbage_38' ? 2 : 1;

  const selectedPackForProduct = (prodId) => {
    const chosen = Number(packSel.value || 0);
    if(chosen && priceOf(prodId, chosen) > 0) return chosen;
    return defaultPackFor(prodId);
  };

  const readQty = () => {
    const q = Number(qtyEl.value || 1);
    return (!q || q < 1) ? 1 : Math.floor(q);
  };

  const render = () => {
    const itemId = (itemSel.value || '').trim();
    const list = itemId ? PRODUCTS.filter(p => p.id === itemId) : PRODUCTS;

    grid.innerHTML = list.map(p => {
      const pk = selectedPackForProduct(p.id);
return `
        <div class="card">
          <img class="product-img" src="${p.img}" alt="${p.name}">
          <div style="font-weight:900;font-size:18px;">${p.emoji} ${p.name}</div>
          <div class="small">전국택배(CJ) · 최소 1개 · ${shipText()}</div>
<div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <button class="btn primary" data-add="${p.id}" style="flex:1; min-width:180px;">🛒 장바구니 담기</button>
            
          </div>
        </div>
      `;
    }).join('');

    // 카드 버튼 이벤트 바인딩
    list.forEach(p => {
      const btn = document.querySelector(`[data-add="${p.id}"]`);
      if(!btn) return;
      btn.addEventListener('click', () => {
        const pk = selectedPackForProduct(p.id);
        const qty = readQty();
        addToCart({
          productId: p.id,
          name: p.name,
          pack: pk,
          qty,
          img: p.img,
          toastMsg: `${p.name} ${pk}kg ${qty}개가 담겼습니다 ✅`
        });
      });
    });
  };

  const quickAdd = () => {
    const itemId = (itemSel.value || '').trim();
    const packVal = Number(packSel.value || 0);
    const qtyVal = readQty();

    if(!itemId) { alert('원하는 품목을 선택해주세요.'); return; }
    if(!packVal) { alert('포장단위를 선택해주세요.'); return; }

    const prod = PRODUCTS.find(p => p.id === itemId);
    if(!prod) { alert('품목 정보를 찾지 못했습니다.'); return; }

    if(priceOf(prod.id, packVal) <= 0) { 
      alert('선택한 포장단위로는 담을 수 없습니다.'); 
      return; 
    }

    addToCart({
      productId: prod.id,
      name: prod.name,
      pack: packVal,
      qty: qtyVal,
      img: prod.img,
      toastMsg: `${prod.name} ${packVal}kg ${qtyVal}개가 담겼습니다 ✅`
    });
  };

  // ===== 이벤트 =====
  document.addEventListener('DOMContentLoaded', ()=>{
    // 출고 안내
    if(shipInfo) shipInfo.textContent = '⏱️ ' + shipText();

    // +담기 / 초기화 / 필터
    const quickAddBtn = document.getElementById('quickAdd');
    if(quickAddBtn){
      quickAddBtn.addEventListener('click', (e)=>{ e.preventDefault(); quickAdd(); });
    }

    const resetBtn = document.getElementById('reset');
    if(resetBtn){
      resetBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        itemSel.value = '';
        packSel.value = '';
        qtyEl.value = '1';
        setPackOptions();
        render();
      });
    }

    itemSel.addEventListener('change', ()=>{ setPackOptions(); render(); });
    packSel.addEventListener('change', render);

    // 시작
    setPackOptions();
    updateCartCount();
    render();
  });
  </script>

</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>싱싱농산물 B2B | 상품상세</title>
  <link rel="stylesheet" href="assets/style.css" />
  
</head>
<body>
  <div class="topbar" style="background:#fff;">
    <div class="container" style="padding:12px 18px;">
      <div style="font-size:22px; font-weight:1000; color:#dc2626; letter-spacing:-.6px;">
        ⏱️ 오전 9시까지 발주+정산시 당일 출고
      </div>
      <div style="margin-top:6px; font-size:14px; color:#475569;">
        🚚 CJ대한통운 · 📦 전 품목 1/2/3/5kg 소포장 · 최소 1개부터 · 전국 택배
      </div>
    </div>
  </div>

  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="logo.jpg" alt="싱싱농산물 로고">
        <div>
          <div style="font-weight:900;">싱싱농산물</div>
          <div style="font-size:12px;color:#64748b;">가격 노출형 B2B 발주몰</div>
        </div>
      </a>

      <nav class="menu">
        <a href="products.html">상품목록</a>
        <a href="checkout.html">발주서</a>
        <a href="contact.html">단가/상담</a>
      </nav>

      <div class="cta">
        <a class="btn" href="cart.html">장바구니 (<span data-cart-count>0</span>)</a>
        <a class="btn primary" href="checkout.html">바로 발주</a>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      
<div id="wrap"></div>
<script src="assets/prices.js"></script>
<script>
const PRICE = (window.SINGSING_PRICE_TABLE && window.SINGSING_PRICE_TABLE.items) ? window.SINGSING_PRICE_TABLE.items : {};
const priceOf = (id, pack)=> (PRICE[id] && PRICE[id][pack]) ? PRICE[id][pack] : 0;
(async ()=>{
  const params = new URLSearchParams(location.search);
  const id = params.get('id');
  const res = await fetch('assets/products.json');
  const products = await res.json();
  const p = products.find(x=>x.id===id) || products[0];
  const wrap = document.getElementById('wrap');
  wrap.innerHTML = `
    <div class="row" style="align-items:flex-start;">
      <div class="card" style="flex:1;">
        <img class="product-img" src="${p.img}" alt="${p.name}" style="height:320px;">
        <div class="badges">
          <span class="badge green">✅ 농부 검수형</span>
          <span class="badge">📦 1/2/3/5kg</span>
          <span class="badge">🚚 CJ대한통운</span>
          <span class="badge">⏱️ ${shipText()}</span>
        </div>
      </div>
      <div style="flex:1;">
        <h1 class="h1">${p.emoji} ${p.name}</h1>
        <p class="p">정산확인 후 포장 및 출고됩니다. 품질은 농부 기준으로 검수하여 출고합니다.</p>
        <div class="card" style="margin-top:14px;">
          <div class="form-grid">
            <select id="packSel">
              <option value="1">1kg</option>
              <option value="2">2kg</option>
              <option value="3">3kg</option>
              <option value="5">5kg</option>
            </select>
            <input class="input" id="qty" type="number" min="1" value="1" />
          </div>
          <div class="badges">
            <span class="badge green" id="priceBadge"></span>
            <span class="badge">최소 1개</span>
          </div>
          <div class="row" style="margin-top:12px;">
            <button class="btn" onclick="location.href='products.html'">목록</button>
            <button class="btn primary" id="addBtn">장바구니 담기</button>
          </div>
          <p class="small" style="margin-top:10px;">
            결제방식: <b>주문 접수 → 정산 확인 → 포장 및 출고</b><br>
            출고: 오전 9시까지 정산 완료 시 당일 출고 / 이후 익일 출고
          </p>
        </div>
      </div>
    </div>
  `;
  const packSel = document.getElementById('packSel');
  const qtyEl = document.getElementById('qty');
  const priceBadge = document.getElementById('priceBadge');
  const refresh = ()=>{
    const pack = Number(packSel.value);
    priceBadge.textContent = `₩ ${KRW(priceOf(p.id, pack))} / ${pack}kg`;
  };
  packSel.addEventListener('change', refresh);
  refresh();

  document.getElementById('addBtn').addEventListener('click', ()=>{
    addToCart({productId:p.id, name:p.name, pack:Number(packSel.value), qty:Number(qtyEl.value||1), img:p.img});
  });
})();
</script>

    </div>
  </main>

  <footer>
    <div class="container">
      <div style="font-weight:900; margin-bottom:6px;">싱싱농산물</div>
      <div class="small">
        B2B 산지직송 · 농부 검수형 공급 · 전 품목 1/2/3/5kg 소포장 · CJ대한통운 전국 택배<br>
        © 싱싱농산물. All rights reserved.
      </div>
      <div class="small" style="margin-top:10px;">
        문의: 010-5595-3890 / lettucefarm413@gmail.com
      </div>
    </div>
  </footer>

  <div class="floating">
    <a class="float-btn" href="contact.html">💬 단가/상담</a>
    <a class="float-btn secondary" href="tel:01055953890">📞 전화 문의</a>
  </div>

  <script src="assets/app.js"></script>
  <script>updateCartCount();</script>
  
</body>
</html>